import { useEffect } from "react";

export const useIntersectionObserver = (ref, controls, threshold)  => {
    useEffect(() => {
        const observer = new IntersectionObserver(
        (entries) => {
            entries.forEach((entry) => {
            if (entry.isIntersecting) {
                controls.start('final');
            }
            });
        },
        {
            threshold: threshold,
        }
        );

        if (ref.current) {
        observer.observe(ref.current);
        }

        return () => {
        if (ref.current) {
            observer.unobserve(ref.current);
        }
        };
    }, [controls]);

}